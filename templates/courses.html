{% extends "base.html" %}

{% block title %}–ö—É—Ä—Å—ã - Bonus Education CRM{% endblock %}

{% block page_title %}
    <i class="fas fa-book-open me-3" style="color: var(--primary-color);"></i>
                    –ö—É—Ä—Å—ã —Ç—É—Ä–µ—Ü–∫–æ–≥–æ —è–∑—ã–∫–∞
{% endblock %}

{% block page_subtitle %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –æ–±—É—á–µ–Ω–∏—è{% endblock %}

{% block content %}
        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="row g-2 align-items-end">
                    <div class="col-md-4">
                        <label class="form-label fw-bold"><i class="fas fa-language me-2"></i>–§–∏–ª—å—Ç—Ä –ø–æ —è–∑—ã–∫—É</label>
                        <select id="filterLanguage" class="form-select">
                            <option value="">–í—Å–µ —è–∑—ã–∫–∏</option>
                            <option value="–¢—É—Ä–µ—Ü–∫–∏–π">–¢—É—Ä–µ—Ü–∫–∏–π</option>
                            <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                            <option value="–ö–æ—Ä–µ–π—Å–∫–∏–π">–ö–æ—Ä–µ–π—Å–∫–∏–π</option>
                            <option value="–î—Ä—É–≥–æ–π">–î—Ä—É–≥–æ–π</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label fw-bold"><i class="fas fa-layer-group me-2"></i>–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É</label>
                        <select id="filterStatus" class="form-select">
                            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="–ù–∞—á–∞–ª—å–Ω—ã–π">–ù–∞—á–∞–ª—å–Ω—ã–π</option>
                            <option value="–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π">–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π</option>
                            <option value="–°—Ä–µ–¥–Ω–∏–π">–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                            <option value="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label fw-bold"><i class="fas fa-search me-2"></i>–ü–æ–∏—Å–∫</label>
                        <input id="filterSearch" type="text" class="form-control" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ/–æ–ø–∏—Å–∞–Ω–∏–µ">
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤ -->
        <div class="row">
            {% for course in courses %}
    <div class="col-lg-6 col-xl-4 mb-4 course-card" data-language="{{ course.language or '–¢—É—Ä–µ—Ü–∫–∏–π' }}" data-status="{{ course.status or '' }}" data-level="{{ course.level or '' }}" data-name="{{ course.name }}" data-desc="{{ course.description }}">
        <div class="card h-100 fade-in-up" style="animation-delay: {{ loop.index0 * 0.1 }}s;">
            <div class="card-header" style="background: 
                {% if course.status %}
                    {% if course.status == '–ù–∞—á–∞–ª—å–Ω—ã–π' %}var(--primary-gradient)
                    {% elif course.status == '–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π' %}var(--success-gradient)
                    {% elif course.status == '–°—Ä–µ–¥–Ω–∏–π' %}var(--warning-gradient)
                    {% elif course.status == '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π' %}var(--info-gradient)
                    {% elif course.status == '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π' %}var(--secondary-gradient)
                    {% else %}var(--dark-gradient){% endif %}
                {% else %}
                    {% if 'A1' in course.name %}var(--primary-gradient)
                    {% elif 'A2' in course.name %}var(--success-gradient)
                    {% elif 'B1' in course.name %}var(--warning-gradient)
                    {% elif 'B2' in course.name %}var(--info-gradient)
                    {% elif 'C1' in course.name %}var(--secondary-gradient)
                    {% else %}var(--dark-gradient){% endif %}
                {% endif %};">
                <div class="d-flex align-items-center justify-content-between">
                    <h5 class="mb-0 text-white">
                        {% if course.status %}
                            {% if course.status == '–ù–∞—á–∞–ª—å–Ω—ã–π' %}<i class="fas fa-flag me-2"></i>üáπüá∑ A1
                            {% elif course.status == '–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π' %}<i class="fas fa-star me-2"></i>üéØ A2
                            {% elif course.status == '–°—Ä–µ–¥–Ω–∏–π' %}<i class="fas fa-gem me-2"></i>‚≠ê B1
                            {% elif course.status == '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π' %}<i class="fas fa-rocket me-2"></i>üöÄ B2
                            {% elif course.status == '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π' %}<i class="fas fa-crown me-2"></i>üëë C1
                            {% else %}<i class="fas fa-user-graduate me-2"></i>üéì –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π{% endif %}
                        {% elif course.level %}
                            {% if course.level == 'A1' %}<i class="fas fa-flag me-2"></i>üáπüá∑ A1
                            {% elif course.level == 'A2' %}<i class="fas fa-star me-2"></i>üéØ A2
                            {% elif course.level == 'B1' %}<i class="fas fa-gem me-2"></i>‚≠ê B1
                            {% elif course.level == 'B2' %}<i class="fas fa-rocket me-2"></i>üöÄ B2
                            {% elif course.level == 'C1' %}<i class="fas fa-crown me-2"></i>üëë C1
                            {% else %}<i class="fas fa-user-graduate me-2"></i>üéì –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π{% endif %}
                        {% else %}
                            {% if 'A1' in course.name %}<i class="fas fa-flag me-2"></i>üáπüá∑ A1
                            {% elif 'A2' in course.name %}<i class="fas fa-star me-2"></i>üéØ A2
                            {% elif 'B1' in course.name %}<i class="fas fa-gem me-2"></i>‚≠ê B1
                            {% elif 'B2' in course.name %}<i class="fas fa-rocket me-2"></i>üöÄ B2
                            {% elif 'C1' in course.name %}<i class="fas fa-crown me-2"></i>üëë C1
                            {% else %}<i class="fas fa-user-graduate me-2"></i>üéì –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π{% endif %}
                        {% endif %}
                    </h5>
                    <span class="badge bg-light text-dark">
                        {% if course.status %}
                            {{ course.status }}
                        {% elif 'A1' in course.name %}
                            –ù–∞—á–∞–ª—å–Ω—ã–π
                        {% elif 'A2' in course.name %}
                            –≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π
                        {% elif 'B1' in course.name %}
                            –°—Ä–µ–¥–Ω–∏–π
                        {% elif 'B2' in course.name %}
                            –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π
                        {% elif 'C1' in course.name %}
                            –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π
                        {% else %}
                            –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π
                        {% endif %}
                    </span>
                </div>
                    </div>
            <div class="card-body">
                <h6 class="card-title mb-3" style="font-weight: 700; color: var(--dark-color);">
                    {{ course.name }}
                </h6>
                <p class="card-text text-muted mb-4" style="line-height: 1.6;">
                    {{ course.description }}
                </p>
                
                <div class="row mb-3">
                    <div class="col-6">
                        <div class="d-flex align-items-center text-muted">
                            <i class="fas fa-clock me-2" style="color: var(--primary-color);"></i>
                            <small>{{ course.duration }}</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="d-flex align-items-center text-muted">
                            <i class="fas fa-users me-2" style="color: var(--success-color);"></i>
                            <small>4-8 —á–µ–ª–æ–≤–µ–∫</small>
                        </div>
                        </div>
                    </div>
                <div class="mb-2">
                    <span class="badge bg-light text-dark"><i class="fas fa-language me-1"></i>{{ course.language or '–¢—É—Ä–µ—Ü–∫–∏–π' }}</span>
                </div>
                {% if course.days or course.time_from %}
                <div class="mb-3 p-2" style="background: #f8f9ff; border: 1px solid #e6e9ff; border-radius: 10px;">
                    <div class="d-flex align-items-center flex-wrap gap-2">
                        <span class="badge bg-light text-dark">
                            <i class="fas fa-calendar-alt me-1"></i>
                            {{ course.days|join(', ') if course.days else '–î–Ω–∏ —É—Ç–æ—á–Ω—è—é—Ç—Å—è' }}
                        </span>
                        <span class="badge bg-light text-dark">
                            <i class="fas fa-clock me-1"></i>
                            {% if course.time_from %}{{ course.time_from }}{% if course.time_to %}-{{ course.time_to }}{% endif %}{% else %}–í—Ä–µ–º—è —É—Ç–æ—á–Ω—è–µ—Ç—Å—è{% endif %}
                        </span>
                    </div>
                </div>
                {% endif %}
                    
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-tag me-2" style="color: var(--warning-color);"></i>
                        <span class="fw-bold" style="color: var(--success-color);">{{ '{:,.0f}'.format(course.price|float) | replace(',', ' ') }} —Å—É–º</span>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-transparent border-0">
                <div class="d-flex gap-2">
                    <button class="btn btn-outline-primary btn-sm flex-fill" data-bs-toggle="modal" data-bs-target="#editCourseModal{{ course.id }}">
                            <i class="fas fa-edit me-1"></i>
                            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    <button class="btn btn-outline-danger btn-sm flex-fill" onclick="deleteCourse({{ course.id }})">
                            <i class="fas fa-trash me-1"></i>
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            
            <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ -->
    <div class="col-lg-6 col-xl-4 mb-4">
        <div class="card h-100 fade-in-up add-course-card" data-bs-toggle="modal" data-bs-target="#addCourseModal" style="cursor: pointer; border: 2px dashed rgba(102,126,234,0.3); background: rgba(102,126,234,0.05);">
            <div class="card-body d-flex flex-column align-items-center justify-content-center text-center" style="min-height: 300px;">
                <div class="stat-icon mb-3" style="width: 80px; height: 80px; background: var(--primary-gradient);">
                    <i class="fas fa-plus" style="font-size: 2rem;"></i>
                </div>
                <h5 class="mb-2" style="font-weight: 700; color: var(--dark-color);">–î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</h5>
                <p class="text-muted mb-0">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫—É—Ä—Å —Ç—É—Ä–µ—Ü–∫–æ–≥–æ —è–∑—ã–∫–∞</p>
            </div>
                </div>
            </div>
        </div>

        {% if not courses %}
        <div class="row">
            <div class="col-12">
                <div class="empty-state">
            <i class="fas fa-book-open"></i>
            <h5>–ü–æ–∫–∞ –Ω–µ—Ç –∫—É—Ä—Å–æ–≤</h5>
                    <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –∫—É—Ä—Å —Ç—É—Ä–µ—Ü–∫–æ–≥–æ —è–∑—ã–∫–∞</p>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addCourseModal">
                <i class="fas fa-plus me-2"></i>
                        –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å
                    </button>
                </div>
            </div>
        </div>
        {% endif %}

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—É—Ä—Å–æ–≤ —É–¥–∞–ª–µ–Ω–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É -->

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ -->
    <div class="modal fade" id="addCourseModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
        <div class="modal-content" style="border-radius: var(--border-radius-lg);">
            <div class="modal-header" style="background: var(--primary-gradient); border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;">
                <h5 class="modal-title text-white">
                    <i class="fas fa-plus me-3"></i>
                        –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫—É—Ä—Å
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
            <div class="modal-body p-4">
                <form id="addCourseForm">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-book me-2"></i>–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞</label>
                            <input type="text" class="form-control" name="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¢—É—Ä–µ—Ü–∫–∏–π —è–∑—ã–∫ A1" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-clock me-2"></i>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–µ—Å—è—Ü–µ–≤)</label>
                            <div class="input-group">
                                <input type="number" min="1" max="12" class="form-control" name="duration_months" placeholder="2">
                                <span class="input-group-text">–º–µ—Å.</span>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-bold"><i class="fas fa-align-left me-2"></i>–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞</label>
                        <textarea class="form-control" name="description" rows="3" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞..." required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-tag me-2"></i>–¶–µ–Ω–∞</label>
                            <input type="text" class="form-control" name="price" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£—Ç–æ—á–Ω—è–µ—Ç—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-layer-group me-2"></i>–£—Ä–æ–≤–µ–Ω—å</label>
                            <select class="form-select" name="level">
                                <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
                                <option value="A1">A1 - –ù–∞—á–∞–ª—å–Ω—ã–π</option>
                                <option value="A2">A2 - –≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π</option>
                                <option value="B1">B1 - –°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="B2">B2 - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                                <option value="C1">C1 - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</option>
                                <option value="Individual">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-layer-group me-2"></i>–°—Ç–∞—Ç—É—Å —É—Ä–æ–≤–Ω—è</label>
                            <select class="form-select" name="status">
                                <option value="">‚Äî –ê–≤—Ç–æ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é ‚Äî</option>
                                <option value="–ù–∞—á–∞–ª—å–Ω—ã–π">–ù–∞—á–∞–ª—å–Ω—ã–π</option>
                                <option value="–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π">–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π</option>
                                <option value="–°—Ä–µ–¥–Ω–∏–π">–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                                <option value="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-language me-2"></i>–Ø–∑—ã–∫ –∫—É—Ä—Å–∞</label>
                            <select class="form-select" name="language">
                                <option value="–¢—É—Ä–µ—Ü–∫–∏–π">–¢—É—Ä–µ—Ü–∫–∏–π</option>
                                <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                                <option value="–ö–æ—Ä–µ–π—Å–∫–∏–π">–ö–æ—Ä–µ–π—Å–∫–∏–π</option>
                                <option value="–î—Ä—É–≥–æ–π">–î—Ä—É–≥–æ–π</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-chalkboard-teacher me-2"></i>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</label>
                            <select class="form-select" name="teacher_id">
                                <option value="">‚Äî –ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω ‚Äî</option>
                                {% for t in teachers %}
                                <option value="{{ t.id }}">{{ t.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-calendar-alt me-2"></i>–î–Ω–∏ –∑–∞–Ω—è—Ç–∏–π</label>
                            <div class="d-flex flex-wrap gap-2">
                                {% set week_days = ['–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫','–í—Ç–æ—Ä–Ω–∏–∫','–°—Ä–µ–¥–∞','–ß–µ—Ç–≤–µ—Ä–≥','–ü—è—Ç–Ω–∏—Ü–∞','–°—É–±–±–æ—Ç–∞','–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'] %}
                                {% for d in week_days %}
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="days" value="{{ d }}" id="newd{{ loop.index }}">
                                    <label class="form-check-label" for="newd{{ loop.index }}">{{ d }}</label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold"><i class="fas fa-clock me-2"></i>–í—Ä–µ–º—è (—Å‚Äì–ø–æ)</label>
                            <div class="input-group">
                                <input type="time" class="form-control" name="time_from">
                                <span class="input-group-text">‚Äî</span>
                                <input type="time" class="form-control" name="time_to">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer border-0 p-4">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>–û—Ç–º–µ–Ω–∞
                </button>
                <button type="button" class="btn btn-primary" onclick="addCourse()">
                    <i class="fas fa-save me-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—É—Ä—Å
                </button>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫—É—Ä—Å–æ–≤ -->
{% for course in courses %}
<div class="modal fade" id="editCourseModal{{ course.id }}" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="border-radius: var(--border-radius-lg);">
            <div class="modal-header" style="background: var(--primary-gradient); border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;">
                <h5 class="modal-title text-white">
                    <i class="fas fa-edit me-3"></i>
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <form action="/edit_course/{{ course.id }}" method="post">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-book me-2"></i>–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞
                            </label>
                            <input type="text" class="form-control" name="name" value="{{ course.name }}" required style="border-radius: var(--border-radius);">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-clock me-2"></i>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–µ—Å—è—Ü–µ–≤)
                            </label>
                            <div class="input-group">
                                <input type="number" min="1" max="12" class="form-control" name="duration_months" value="{{ course.duration_months or '' }}" placeholder="2">
                                <span class="input-group-text">–º–µ—Å.</span>
                            </div>
                        </div>
                        </div>
                        <div class="mb-3">
                        <label class="form-label fw-bold">
                            <i class="fas fa-align-left me-2"></i>–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞
                        </label>
                        <textarea class="form-control" name="description" rows="3" required style="border-radius: var(--border-radius);">{{ course.description }}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-tag me-2"></i>–¶–µ–Ω–∞
                            </label>
                            <input type="text" class="form-control" name="price" value="{{ course.price }}" required style="border-radius: var(--border-radius);">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-layer-group me-2"></i>–£—Ä–æ–≤–µ–Ω—å
                            </label>
                            <select class="form-select" name="level" required style="border-radius: var(--border-radius);">
                                <option value="A1" {% if 'A1' in course.name %}selected{% endif %}>A1 - –ù–∞—á–∞–ª—å–Ω—ã–π</option>
                                <option value="A2" {% if 'A2' in course.name %}selected{% endif %}>A2 - –≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π</option>
                                <option value="B1" {% if 'B1' in course.name %}selected{% endif %}>B1 - –°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="B2" {% if 'B2' in course.name %}selected{% endif %}>B2 - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                                <option value="C1" {% if 'C1' in course.name %}selected{% endif %}>C1 - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</option>
                                <option value="Individual" {% if 'Individual' in course.name %}selected{% endif %}>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π</option>
                            </select>
                        </div>
                </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-layer-group me-2"></i>–°—Ç–∞—Ç—É—Å —É—Ä–æ–≤–Ω—è
                            </label>
                            <select class="form-select" name="status" style="border-radius: var(--border-radius);">
                                <option value="">‚Äî –ê–≤—Ç–æ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é ‚Äî</option>
                                <option value="–ù–∞—á–∞–ª—å–Ω—ã–π" {% if course.status == '–ù–∞—á–∞–ª—å–Ω—ã–π' %}selected{% endif %}>–ù–∞—á–∞–ª—å–Ω—ã–π</option>
                                <option value="–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π" {% if course.status == '–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π' %}selected{% endif %}>–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π</option>
                                <option value="–°—Ä–µ–¥–Ω–∏–π" {% if course.status == '–°—Ä–µ–¥–Ω–∏–π' %}selected{% endif %}>–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π" {% if course.status == '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π' %}selected{% endif %}>–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                                <option value="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π" {% if course.status == '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π' %}selected{% endif %}>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-language me-2"></i>–Ø–∑—ã–∫ –∫—É—Ä—Å–∞
                            </label>
                            <select class="form-select" name="language" style="border-radius: var(--border-radius);">
                                <option value="–¢—É—Ä–µ—Ü–∫–∏–π" {% if course.language == '–¢—É—Ä–µ—Ü–∫–∏–π' %}selected{% endif %}>–¢—É—Ä–µ—Ü–∫–∏–π</option>
                                <option value="–ê–Ω–≥–ª–∏–π—Å–∫–∏–π" {% if course.language == '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π' %}selected{% endif %}>–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>
                                <option value="–ö–æ—Ä–µ–π—Å–∫–∏–π" {% if course.language == '–ö–æ—Ä–µ–π—Å–∫–∏–π' %}selected{% endif %}>–ö–æ—Ä–µ–π—Å–∫–∏–π</option>
                                <option value="–î—Ä—É–≥–æ–π" {% if course.language == '–î—Ä—É–≥–æ–π' %}selected{% endif %}>–î—Ä—É–≥–æ–π</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-chalkboard-teacher me-2"></i>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
                            </label>
                            <select class="form-select" name="teacher_id" style="border-radius: var(--border-radius);">
                                <option value="">‚Äî –ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω ‚Äî</option>
                                {% for t in teachers %}
                                    <option value="{{ t.id }}" {% if course.teacher_id and course.teacher_id == t.id %}selected{% endif %}>{{ t.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-calendar-alt me-2"></i>–î–Ω–∏ –∑–∞–Ω—è—Ç–∏–π
                            </label>
                            <div class="d-flex flex-wrap gap-2">
                                {% set week_days = ['–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫','–í—Ç–æ—Ä–Ω–∏–∫','–°—Ä–µ–¥–∞','–ß–µ—Ç–≤–µ—Ä–≥','–ü—è—Ç–Ω–∏—Ü–∞','–°—É–±–±–æ—Ç–∞','–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'] %}
                                {% for d in week_days %}
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="days" value="{{ d }}" id="d{{ loop.index }}{{ course.id }}" {% if course.days and d in course.days %}checked{% endif %}>
                                    <label class="form-check-label" for="d{{ loop.index }}{{ course.id }}">{{ d }}</label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label fw-bold">
                                <i class="fas fa-clock me-2"></i>–í—Ä–µ–º—è (—Å‚Äì–ø–æ)
                            </label>
                            <div class="input-group">
                                <input type="time" class="form-control" name="time_from" value="{{ course.time_from or '' }}">
                                <span class="input-group-text">‚Äî</span>
                                <input type="time" class="form-control" name="time_to" value="{{ course.time_to or '' }}">
                            </div>
                        </div>
                    </div>
                    <!-- –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π –±–ª–æ–∫ –≤—ã–±–æ—Ä–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è -->
                    <div class="modal-footer border-0 p-4">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times me-2"></i>–û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% endblock %}

{% block scripts %}
    <script>
        // –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä —Å–ø–∏—Å–∫–∞ –∫—É—Ä—Å–æ–≤
        function applyCoursesFilter() {
            const lang = document.getElementById('filterLanguage').value.trim();
            const status = document.getElementById('filterStatus').value.trim();
            const q = document.getElementById('filterSearch').value.trim().toLowerCase();
            document.querySelectorAll('.course-card').forEach(card => {
                const cLang = (card.getAttribute('data-language') || '').trim();
                const cStatus = (card.getAttribute('data-status') || '').trim();
                const name = (card.getAttribute('data-name') || '').toLowerCase();
                const desc = (card.getAttribute('data-desc') || '').toLowerCase();
                let visible = true;
                if (lang && cLang !== lang) visible = false;
                if (status && cStatus !== status) visible = false;
                if (q && !(name.includes(q) || desc.includes(q))) visible = false;
                card.style.display = visible ? 'block' : 'none';
            });
        }
        ['filterLanguage','filterStatus','filterSearch'].forEach(id => {
            const el = document.getElementById(id);
            if (el) el.addEventListener('input', applyCoursesFilter);
        });
        document.addEventListener('DOMContentLoaded', applyCoursesFilter);

        function addCourse() {
            const form = document.getElementById('addCourseForm');
            const formData = new FormData(form);
            
            fetch('/api/add_course', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const modal = bootstrap.Modal.getInstance(document.getElementById('addCourseModal'));
                    modal.hide();
                    showNotification('–ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!', 'success');
                setTimeout(() => location.reload(), 1000);
                } else {
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫—É—Ä—Å–∞', 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫—É—Ä—Å–∞', 'error');
            });
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type === 'success' ? 'success' : 'danger'} position-fixed`;
        notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px; border-radius: var(--border-radius);';
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} me-2"></i>
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function deleteCourse(courseId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫—É—Ä—Å?')) {
                fetch(`/delete_course/${courseId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                })
                .then(response => {
                    if (response.ok) {
                        showNotification('–ö—É—Ä—Å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!', 'success');
                        setTimeout(() => location.reload(), 1000);
                    } else {
                        showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫—É—Ä—Å–∞', 'error');
                    }
                })
                .catch(error => {
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫—É—Ä—Å–∞', 'error');
                });
            }
        }

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
    document.addEventListener('DOMContentLoaded', function() {
        const cards = document.querySelectorAll('.card');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            setTimeout(() => {
                card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
        });
    });
    </script>
{% endblock %}